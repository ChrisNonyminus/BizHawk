# BizHawk changelog

## changes from 2.8 to 2.9

- Misc. changes to EmuHawk:
	- Fix Windows Lock Screen breaking hotkeys (#3161)
	- Warn user if currently set firmware does not match the firmware reported in movie header
	- Allow negative values to be entered in RAM Watch for fixed-point watches (#3175)
	- Fix .gmv importer not setting the Core name in the header of the resulting .bk2
	- Fix regression where screenshots from some cores were transparent (#3166)
	- Make DirectX optional on Windows (prereq installer will still install it, as it is the fastest option)
	- Fix edge case load failures if the game name does not match the name of the rom
	- Fix opening roms from "jump list" in Windows shell / file manager (#3224)
	- Improve UX of loading a savestate from an older (or newer) version
	- Fix shaders' height being used for width
	- Finish UX for merging/unmerging LShift+RShift and other modifier keys (#3184, #3257)
	- Do not rely on non-deterministic Dictionary ordering for Axis names, fixes .dsm importing
	- Do not offer to remove the missing file from recent roms when it's not actually missing, it just failed to load (#3006)
	- Fix hotkeys triggering accidentally in Virtual Pad on Windows (#3087)
	- Increase precision when tweaking axis sensitivity/deadzone (#3038)
	- Fix category radio buttons being cut off in Messages config
	- Restore "priority" option for U+D/L+R policy, and make it the default again (#2752)
	- Refactor firmware config so the acceptability status icons make sense (#3157)
	- Fix "Screenshot (raw) -> Clipboard" not showing keybind hint
	- Add UI for editing any core's Settings/Sync Settings without it being loaded (except for the unreleased MAME core)
	- Fix strange behaviour when trying to extract archive which contains folders
	- Bump FFmpeg to 4.4.1, add auto-download to Linux port (#3259, #2457)
	- Reorder `Config` > `Preferred Cores` submenu
	- Remove some unnecessary prompts to reboot core
	- Move "Save Window Position" for main window to `Config` > `Display...` > `Window` and add a "Stay on Top"
	- Fix Windows version detection and enable warning for unsupported versions (#2972, #3194)
	- Fix some systems not having a name to display in the window title
	- Fix MSX rom loading
	- Make disc extension detection case-insensitive
	- Fix Debugger breakpoint crash with mGBA (#3287)
- Linux port:
	- Fix various file pickers using case-sensitive file extensions
	- Change default Lua engine to "NLua+KopiLua" which doesn't seem to crash on normal Mono builds like the other one does
	- Add short-circuit to Mupen64Plus loading to avoid error messages and any strange failure state
	- Adjusted alignment and size of UI elements in Record Movie dialog so they don't overlap... again
- TAStudio:
	- Fix "Select between Markers" hotkey not working
	- Fix .tasproj version writing differing based on locale (e.g. , instead of .)
- Lua/ApiHawk:
	- (Lua) Pass arguments (addr, val, flags) to Lua memory callback functions (use `event.can_use_callback_params` when writing polyfills)
	- (ApiHawk) Merge `IGameInfoApi` into `IEmulationApi`, plus some other minor method signature changes
	- (Lua) Fix Lua referencing a core after it's unloaded, making scripts crash (#3226)
	- (Lua/ApiHawk) Fix `event.onmemoryread` behaviour under mGBA (#3230)
	- (Lua/ApiHawk) Properly handle removing memory callbacks from within a callback (#1823)
	- (Lua) Use `ClientSize` when resizing Lua Forms (#3034)
	- (ApiHawk) Change injector to include non-public properties when looking for `ApiContainer`
	- (ApiHawk) Migrate from `CoreSystem` enum to `VSystemID` const strings
	- (Lua) Fix encoding bug which caused e.g. Japanese text to become mojibake/garbled (#190, #2041)
- New and graduating cores:
	- Ares64:
		- Ares64 (Performance) has been removed, with Ares64 (Accuracy) becoming the singular Ares64 core
		- Ares64 is no longer experimental
		- Angrylion-rdp integrated for RDP and VI emulation, fixing many issues the MAME RDP had
		- Fix A/V Sync when interlaced
		- Add transfer pak support and N64 mouse support
		- Add more debugging features (tracer, disassembler, get registers, System Bus domain)
		- Update to interim version after v128
		- Fix tracer regression from upstream update
	- TIC-80:
		- New experimental core for the TIC-80 fantasy computer, using nesbox's own reference implementation
- Other cores:
	- A2600Hawk:
		- Fix crash when pushing Select on Karate title screen
	- BSNES:
		- Fix graphics debugger exception when freezing a tile (#3195)
		- Fix broken upstream links
	- BSNESv115+:
		- Add region override settings
		- Fix loading a savestate crashing after a reset (#3173)
		- Various internal cleanup
		- Properly implement MSU1
		- Add fast DSP and fast coprocessor settings
		- Fix broken upstream links
		- Improve peripheral selection for P1
		- Rework Payload peripheral and fix Virtual Pads
	- CPCHawk:
		- Remove redundant `AmstradCpcPokeMemory` tool
	- Gambatte:
		- Improve MBC1/MBC1M emulation
		- Improve HuC1 emulation and implement HuC1 IR support
		- Improve HuC3 emulation and implement support for mapper sound (HuC3 is currently the only use case)
		- Implement MMM01 emulation
		- Implement M161 emulation
		- Improve heuristics for various multicart mappers and remove the multicart detection setting (now effectively always true)
		- Internal mapper, IR, and RTC code cleanup
		- Various optimizations toward the CPU loop and read/write code (around 10-15% performance increase)
		- Initial time settings trimmed down to a single setting, using total number of seconds
		- Implement quirk with bit 4 of rLCDC, fixes cgb-acid-hell
		- Fix sprite priority in CGB-DMG mode
	- Genplus-gx:
		- Change default peripheral to 3-button Genesis gamepad (#2775, #3262)
		- Stop byteswapping Z80 domains (#3290)
	- Libretro:
		- Rewrote Libretro host implementation, fixing some crashes, adding memory domains, and slightly improving performance (#3211, #3216)
	- melonDS:
		- Update to interim version after 0.9.4
		- Fix SaveRAM not getting written to disk when unloading/reloading core (#3165)
		- Implement threaded renderer support
		- Replace darm with a new DS centric disassembler, fixing various issues with tracing/disassembly
		- Split ARM7/touch screen polls to an "alt lag" variable and add a setting for whether to consider this "alt lag" (#3278)
		- Reduce state size a bit
		- Various internal cleanups
	- mGBA:
		- Update to interim version after 0.9.3, fixing a softlock in Hamtaro: Ham Ham Heartbreak (#2541)
	- NesHawk:
		- Fix SXROM Detection (#3168)
		- Fix crash for Namco 163 mapper (#3192)
		- Relax restrictions on VRC1 PRG registers, so they can be larger than the original VRC1 chip allows (for rom-expanding hacks)
		- Mask PGR writes for VRC1
		- "Unimplement" `ICycleTiming`, fixes regular NesHawk trying to use cycle timing (only intended for SubNesHawk)
	- Nyma cores (Faust, HyperNyma, NeoPop, Nymashock, Saturnus, T. S. T., TurboNyma, VirtualBoyee):
		- Move VirtualBoyee to Nyma system
		- Update to Mednafen 1.29.0
		- Fix disc switching for disc based cores (Nymashock/Saturnus)
	- SameBoy:
		- Update to interim version after 0.14.7, fixing some bugs and adding GB palette customiser (#3185, #3239)
	- SMSHawk:
		- Fix screechy/static audio during Sega logo in Ys (Japan) (#3160)
		- Fix `InvalidOperationException` when using SMS peripherals (#3282)
	- Snes9x:
		- Fix typo in Snes9x sound settings bitfield (#1208)
	- Virtu:
		- Fix some keyboard state not being savestated
		- Change RTC to use deterministic time when recording instead of system times
	- ZXHawk:
		- Remove redundant `ZXSpectrumPokeMemory` tool

## changes from 2.7 to 2.8

- Misc. changes to EmuHawk:
	- fixed various bugs with the Paths config dialog
	- fixed "Close and reload ROM" in Firmware Manager crashing if it was opened from missing FW dialog (#3054)
	- fixed typos which broke INTV, NES, and PSX gamedb lookups
	- fixed known good Saturn BIOS choices marked as unknown (#3095)
	- updated list of Sega CD / Mega CD BIOSes in firmware database
	- many gamedb additions and updates
	- fixed RAM Search difference fields can't fit all possible values (#3117)
	- fixed `File` > `Load State` > `Auto-load Last Slot` breaking movie recording/playback (#2384)
	- fixed .dsm importer
	- fixed .smv importer nagging about core choice thousands of times (#3022)
	- fixed .vbm importer
	- made OSD message duration (time to fade) configurable in UI, and allow API calls to override it
	- added option to split RAM Watch entries (#1024)
	- fixed drag+drop bug (#1483)
	- made `Config` > `Customize...` > `Pause when menu activated` behave consistently
	- fixed overlapping UI elements in Debugger (#3026)
	- tidied up numbering of save slots and TAStudio branches (#3112)
	- fixed `ObjectDisposedException` when triggering single-instance passthrough
	- fixed throttle edge cases
	- fixed edge cases where post-frame tool updates would run twice after a frame advance
	- added more logging and warning dialogs for edge cases
	- many smaller fixes and even some frontend speed optimisations (not sarcasm, this is a first)
- Linux port:
	- added support for PSX (see Nymashock below) and technically N64 and TI-83 (see Ares64 and Emu83 below)
	- fixed various problems w/ alignment and size under Mono
	- fixed hotkeys triggering accidentally when typing in Virtual Pad fields (#3087)
	- added Nix expression for reproducible EmuHawk (and DiscoHawk) builds without dependency issues
- TAStudio:
	- re-enabled editing of movie comments (#3063)
	- added an edit dialog for TAStudio palette (#2119)
	- fixed branch screenshots (#1513)
	- fixed weird edge case putting TAStudio in an unaccounted-for state (#3066)
	- fixed error when autoloading a rom and TAStudio AND a .tasproj for a different rom
	- fixed incorrect behaviour when jumping to frame 0
- Lua/ApiHawk:
	- added support for `"#RRGGBB"` format when parsing colours ("luacolor" in docs) in Lua API
	- fixed `joypad.setfrommnemonicstr` not working without reinitialising MovieSession (#2525)
- DiscoHawk:
	- fixed deadlocks (#3128)
- New and graduating cores:
	- Nymashock:
		- new PSX core ported from Mednafen (like Octoshock, though this is newer and more easily updated, which also means it has more peripherals)
	- SameBoy:
		- new ported GB/C core with comparable accuracy to Gambatte and GBHawk (not to be confused with the SameBoy SGB core in older releases)
	- Emu83:
		- new TI-83 core
	- BSNESv115+:
		- BSNESv115+ (the "new BSNES port") is no longer experimental
		- fixed Hex Editor and others using read instead of peek (#3060)
		- implemented memory callbacks
		- fixed ram and rom memory domains
		- increased MmapHeapSize to prevent crashes, affected Star Ocean
		- refactored latching to improve dumping/verification
		- reduced savestate size (increased frequency for TAStudio/rewind)
		- improved speed of fast ppu check
	- MSXHawk:
		- MSXHawk is no longer experimental
		- implemented more hardware/mappers
		- added Linux port
	- Ares64:
		- 2 new experimental cores ported from Ares: one for casual play which is slow and desync-prone ("Performance"), and one for TASing which is even slower but will sync ("Accuracy")
- Other cores:
	- A7800Hawk:
		- fixed nondeterminism caused by incorrect savestate code
		- fixed Basketbrawl and summer games
		- fixed off pixel detection in write mode, affected baby pac man
	- Atari2600Hawk:
		- fixed audio issues, affected ms pac man
	- Gambatte:
		- updated core
		- fixed error when attempting to write to some registers e.g. with the Debugger (#3028)
		- fixed crash on Linux
		- refactored GambatteLink to be more modular and add support for 3x/4x
		- added proper memory callback scopes for link play
		- enabled disassembly in link play
		- allowed linking w/ GBC cart IR
		- stopped using fine-grained timing for link play when the link is disconnected
		- added more scopes for memory callbacks
	- GBHawk:
		- updated GBA startup state, affected Konami collection vol. 4
		- fixed link play, affected perfect dark
	- Genplus-gx:
		- added support for SRAM larger than 8MB (#3073)
		- prevented crash when loading Debugger (#2769, #2958)
	- Handy:
		- fixed crash on Linux (#2425)
	- IntelliHawk:
		- adjusted sme timings and fixed accesses to registers, affected motocross
		- cleaned up CPU, fix trace logger and throw less exceptions
		- fixed intellicart, affected various homebrew roms
		- fixed MOBs with x-coord 0 being visible, affected bowling
		- fixed overflow flag calculation, affected checkers and reversi
		- more compatibility work
	- MAME:
		- stopped treating warnings as errors
		- set System Bus correctly
	- melonDS:
		- updated core, adding experimental DSiWare support
		- enabled memory callbacks
		- fixed empty strings in firmware settings preventing roms from loading (#3030)
	- Mupen64Plus:
		- fixed haptic feedback causing movie playback to crash
		- enabled GLideN64's texture wildcard support (#3104)
	- NesHawk:
		- added mapper for Pokemon bootlegs
		- fixed not parsing iNES v2 headers (#3082)
		- other small accuracy improvements and bugfixes
	- O2Hawk:
		- fixed blobbers and Popeye
	- PCEHawk:
		- fixed crash related to framebuffer resizing (#3018)
	- SMSHawk:
		- fixed sprite collision inaccuracy (#1611), affected Ecco the Dolphin
		- fixed Fray (vert lock update)
		- fixed SMS backdrop colors
		- fixed ys (JPN) by emulating VRAM masking bit
		- improved SG-1000 8kb ram adapter emulation
	- VectrexHawk:
		- implemented 64K bank switching
