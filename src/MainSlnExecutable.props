<Project>
	<Import Project="MainSlnCommon.props" />
	<PropertyGroup>
		<TargetName>$(MSBuildProjectName.Substring($([MSBuild]::Add($(MSBuildProjectName.LastIndexOf('.')), 1))))</TargetName>
	</PropertyGroup>
	<PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
		<OutputType>Exe</OutputType>
	</PropertyGroup>
	<PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
		<OutputType>WinExe</OutputType>
	</PropertyGroup>
	<Target Name="PostBuild" AfterTargets="PostBuildEvent">
		<Move Condition=" $(IsTargetingNetFramework) " SourceFiles="$(OutputPath)$(TargetName).exe;$(OutputPath)$(TargetName).exe.config" DestinationFolder="$(OutputPath)../" />
		<Move Condition=" !$(IsTargetingNetFramework) " SourceFiles="$(OutputPath)$(TargetName).dll" DestinationFolder="$(OutputPath)../" />
		<Move Condition=" !$(IsTargetingNetFramework) " SourceFiles="$(OutputPath)$(MSBuildProjectName).runtimeconfig.json" DestinationFiles="$(OutputPath)../$(TargetName).runtimeconfig.json" />
		<!-- TODO shell script to copy $(OutputPath)$(MSBuildProjectName).deps.json beside .dll and patch filenames -->
	</Target>
</Project>
